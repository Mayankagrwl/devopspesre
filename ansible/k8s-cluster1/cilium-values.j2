kubeProxyReplacement: true
k8sServiceHost: {{ ansible_host }}
externalIPs:
    enabled: true
k8sServicePort: 6443
bpf:
  hostLegacyRouting: false
  masquerade: true
prometheus:
  enabled: true
operator:
  prometheus:
    enabled: true
hubble:
  enabled: true
  listenAddress: ":4244"
  tls:
    enabled: true
    auto:
      enabled: true
      method: helm
      certValidityDuration: 1095
    peer:
      dnsNames:
        - "hubble-peer.kube-system.svc.cluster.local"
        - "hubble-peer.default.hubble-grpc.cilium.io"

  relay:
    enabled: true
    # Modify the peer service's DNS name
    peerService: "hubble-peer.kube-system.svc.cluster.local:443"
    # Define the correct DNS names for the certificates
    tls:
      peer:
        dnsNames:
          - "hubble-peer.kube-system.svc.cluster.local"
          - "hubble-peer.default.hubble-grpc.cilium.io"
    # If you are using self-signed certificates or creating custom ones
    certificates:
      generate: true
  ui:
    enabled: true
    client:
      tls:
        enabled: false
    service:
      type: NodePort
      nodePort: 31235
  metrics:
    enableOpenMetrics: true
    #enabled: "{dns:query;ignoreAAAA,drop,flow,flows-to-world,http,traffic_direction,icmp,port-distribution,tcp}"